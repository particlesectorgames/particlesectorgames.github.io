THREE.STLLoader=function(t){THREE.Loader.call(this,t)},THREE.STLLoader.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:THREE.STLLoader,load:function(t,e,r){try{let n=new FileReader,o=this;n.onload=function(){e(o.parse(n.result))},n.readAsArrayBuffer(t)}catch(t){r&&r(t)}},parse:function(t){function e(t){var e,n,o,a;if(a=new DataView(t),n=50,o=a.getUint32(80,!0),e=84+o*n,e===a.byteLength)return!0;for(var i=[115,111,108,105,100],u=0;u<5;u++)if(r(i,a,u))return!1;return!0}function r(t,e,r){for(var n=0,o=t.length;n<o;n++)if(t[n]!==e.getUint8(r+n,!1))return!1;return!0}function n(t){for(var e,r,n,o,a,i,u,f,l=new DataView(t),s=l.getUint32(80,!0),E=!1,c=0;c<70;c++)1129270351==l.getUint32(c,!1)&&82==l.getUint8(c+4)&&61==l.getUint8(c+5)&&(E=!0,o=new Float32Array(3*s*3),a=l.getUint8(c+6)/255,i=l.getUint8(c+7)/255,u=l.getUint8(c+8)/255,f=l.getUint8(c+9)/255);for(var g=84,d=50,p=new THREE.BufferGeometry,w=new Float32Array(3*s*3),T=new Float32Array(3*s*3),h=0;h<s;h++){var R=g+h*d,A=l.getFloat32(R,!0),F=l.getFloat32(R+4,!0),v=l.getFloat32(R+8,!0);if(E){var b=l.getUint16(R+48,!0);0==(32768&b)?(e=(31&b)/31,r=(b>>5&31)/31,n=(b>>10&31)/31):(e=a,r=i,n=u)}for(var y=1;y<=3;y++){var H=R+12*y,L=3*h*3+3*(y-1);w[L]=l.getFloat32(H,!0),w[L+1]=l.getFloat32(H+4,!0),w[L+2]=l.getFloat32(H+8,!0),T[L]=A,T[L+1]=F,T[L+2]=v,E&&(o[L]=e,o[L+1]=r,o[L+2]=n)}}return p.setAttribute("position",new THREE.BufferAttribute(w,3)),p.setAttribute("normal",new THREE.BufferAttribute(T,3)),E&&(p.setAttribute("color",new THREE.BufferAttribute(o,3)),p.hasColors=!0,p.alpha=f),p}function o(t){for(var e,r=new THREE.BufferGeometry,n=/solid([\s\S]*?)endsolid/g,o=/facet([\s\S]*?)endfacet/g,a=0,i=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,u=new RegExp("vertex"+i+i+i,"g"),f=new RegExp("normal"+i+i+i,"g"),l=[],s=[],E=new THREE.Vector3,c=0,g=0,d=0;null!==(e=n.exec(t));){g=d;for(var p=e[0];null!==(e=o.exec(p));){for(var w=0,T=0,h=e[0];null!==(e=f.exec(h));)E.x=parseFloat(e[1]),E.y=parseFloat(e[2]),E.z=parseFloat(e[3]),T++;for(;null!==(e=u.exec(h));)l.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])),s.push(E.x,E.y,E.z),w++,d++;1!==T&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+a),3!==w&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+a),a++}var R=g,A=d-g;r.addGroup(R,A,c),c++}return r.setAttribute("position",new THREE.Float32BufferAttribute(l,3)),r.setAttribute("normal",new THREE.Float32BufferAttribute(s,3)),r}function a(t){return"string"!=typeof t?THREE.LoaderUtils.decodeText(new Uint8Array(t)):t}function i(t){if("string"==typeof t){for(var e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=255&t.charCodeAt(r);return e.buffer||e}return t}var u=i(t);return e(u)?n(u):o(a(t))}});